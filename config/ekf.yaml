### ekf.yaml ###
ekf_filter_node:
  ros__parameters:
    frequency: 5.0       # フィルタの更新頻度 (Hz)
    two_d_mode: true      # 2DロボットなのでTrue (Z軸, Roll, Pitchを無視)
    publish_tf: true      # odom -> base_link のTFを配信する

    # フレーム設定
    map_frame: map
    odom_frame: odom
    base_link_frame: base_link
    world_frame: odom     # odomフレームを基準にする

    # --- オドメトリ設定 (/odom) ---
    # Pythonノードが出力しているトピック名に合わせてください
    odom0: /odom
    
    # [x, y, z, 
    #  roll, pitch, yaw, 
    #  vx, vy, vz, 
    #  vroll, vpitch, vyaw, 
    #  ax, ay, az]
    
    # 解説:
    # 位置(x,y,z)と姿勢(roll,pitch,yaw)は false にします (EKF内で積分計算させるため)
    # 速度(vx, vy)は true にします (計測輪のデータを採用)
    # 角速度(vyaw)は false にします (IMUの方を優先するため重複を避ける)
    odom0_config: [false, false, false,
                   false, false, false,
                   true,  true,  false,
                   false, false, false,
                   false, false, false]
                   
    # オドメトリの共分散を使用するか (Python側で設定したのでtrue推奨)
    odom0_differential: false
    odom0_queue_size: 10

    # --- IMU設定 (/imu/data) ---
    imu0: /imu/data
    
    # 解説:
    # 姿勢(yaw) と 角速度(vyaw) を true にします
    imu0_config: [false, false, false,
                  false, false, true,
                  false, false, false,
                  false, false, true,
                  true,  false, false] # ax (線形加速度) は任意。ドリフト補正に使うならtrue
                  
    imu0_differential: false
    imu0_queue_size: 10
    
    # IMUの加速度から重力を除去するか
    imu0_remove_gravitational_acceleration: true
